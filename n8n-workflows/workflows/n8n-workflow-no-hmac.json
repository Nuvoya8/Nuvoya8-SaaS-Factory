{
  "name": "test-workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "test-workflow",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-node",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [250, 300],
      "webhookId": "no-hmac-webhook"
    },
    {
      "parameters": {
        "jsCode": "// Extraction et validation simple (SANS HMAC pour l'instant)\n\nconst headers = $input.item.json.headers;\nconst body = $input.item.json.body;\n\nconsole.log('üì• Headers re√ßus:', JSON.stringify(headers, null, 2));\nconsole.log('üì• Body re√ßu:', JSON.stringify(body, null, 2));\n\n// V√©rifier app_id\nconst appId = body.metadata?.appId;\nif (!appId) {\n  throw new Error('‚ùå Missing app_id in metadata');\n}\n\nconsole.log('‚úÖ App ID valid√©:', appId);\nconsole.log('‚ö†Ô∏è  Note: V√©rification HMAC d√©sactiv√©e pour le test');\n\n// Passer les donn√©es au n≈ìud suivant\nreturn { json: body };"
      },
      "id": "validate-data",
      "name": "Valider Donn√©es",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "jsCode": "// Traiter la requ√™te et cr√©er la r√©ponse\n\nconst data = $input.item.json.data;\nconst metadata = $input.item.json.metadata;\n\nconsole.log('üì• Message:', data.message);\nconsole.log('üë§ User:', metadata.userId);\nconsole.log('üè¢ App:', metadata.appId);\n\nreturn {\n  json: {\n    success: true,\n    data: {\n      message: 'üéâ Workflow N8N ex√©cut√© avec succ√®s !',\n      receivedMessage: data.message,\n      receivedTimestamp: data.timestamp,\n      appId: metadata.appId,\n      userId: metadata.userId,\n      processedAt: new Date().toISOString(),\n      workflowInfo: {\n        name: 'test-workflow',\n        version: '1.0.0',\n        environment: 'test',\n        security: 'App ID verification only (HMAC to be added)'\n      }\n    }\n  }\n};"
      },
      "id": "process-request",
      "name": "Traiter la Requ√™te",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [650, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}"
      },
      "id": "respond-webhook",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [850, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [[{ "node": "Valider Donn√©es", "type": "main", "index": 0 }]]
    },
    "Valider Donn√©es": {
      "main": [[{ "node": "Traiter la Requ√™te", "type": "main", "index": 0 }]]
    },
    "Traiter la Requ√™te": {
      "main": [[{ "node": "Respond to Webhook", "type": "main", "index": 0 }]]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  }
}

